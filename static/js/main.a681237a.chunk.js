(this["webpackJsonpreact-to-weather"]=this["webpackJsonpreact-to-weather"]||[]).push([[0],{28:function(e,t,a){e.exports=a(47)},33:function(e,t,a){},34:function(e,t,a){},41:function(e,t,a){},43:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),i=a.n(c),s=(a(33),a(34),a(4)),o=a(5),l=function(){return r.a.createElement("header",null,r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/gerrgg/react-to-weather"},r.a.createElement(s.a,{icon:o.b,style:{paddingRight:".5rem"}}),"Source Code")),r.a.createElement("li",null,r.a.createElement("a",{href:"/",className:"logo"},r.a.createElement(s.a,{icon:o.e}),r.a.createElement("br",null),"React to Weather")),r.a.createElement("li",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://gerrgg.github.io/resume/"},"Resume",r.a.createElement(s.a,{icon:o.c,style:{paddingLeft:".5rem"}}))))))},u=a(8),m=a.n(u),h=a(15),p=a(10),d=a(11),f=a(16),v=a(13),E=a(12),y=a(26),g=(a(41),function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this)).state={},n.handleChange=n.handleChange.bind(Object(f.a)(n)),n}return Object(d.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(y.a)({},a,n))}},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.props.handleSubmit},r.a.createElement("button",{type:"button"},r.a.createElement(s.a,{icon:o.d})),r.a.createElement("input",{id:"search-bar",type:"text",name:"query",placeholder:this.props.query,onChange:this.handleChange}),r.a.createElement("button",null,r.a.createElement(s.a,{icon:o.i})))}}]),a}(n.Component)),b=a(17),w=a.n(b),x=(a(43),function(e){return r.a.createElement("div",{className:"detail"},r.a.createElement("span",{className:"header"},e.header,":"),r.a.createElement("span",{className:"value"},e.value))}),k=function(e){var t=function(e){return w()(1e3*e).format("LT")};return r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{id:"weather-details"},r.a.createElement(x,{header:"Wind",value:"".concat(e.data.wind.speed," mph")}),r.a.createElement(x,{header:"Humidity",value:"".concat(e.data.main.humidity,"%")}),r.a.createElement(x,{header:r.a.createElement(s.a,{icon:o.k}),value:t(e.data.sys.sunrise)}),r.a.createElement(x,{header:r.a.createElement(s.a,{icon:o.g}),value:t(e.data.sys.sunset)}),r.a.createElement(x,{header:"Visibility",value:"".concat(e.data.visibility/1e3,"km")}),r.a.createElement(x,{header:"Pressure",value:"".concat(e.data.main.pressure," mb")})))};function j(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=9*(e-273.15)/5+32;return t?Math.round(a)+"\xb0F":Math.round(a)}function O(e){return w()(1e3*e).format("LT")}var N=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this)).state={hasData:!1,src:""},n.handleClick=n.handleClick.bind(Object(f.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getGifSrc();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){this.props.query!==e.query&&this.getGifSrc()}},{key:"handleClick",value:function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getGifSrc();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getGifSrc",value:function(){var e=Object(h.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.query,"XglG7Kno2HckkrUjCimsJOv8YE0STATQ",e.prev=2,e.next=5,fetch("https://api.giphy.com/v1/gifs/translate?api_key=".concat("XglG7Kno2HckkrUjCimsJOv8YE0STATQ","&s=").concat(t),{mode:"cors"});case 5:return a=e.sent,e.next=8,a.json();case 8:n=e.sent,this.setState({hasData:!0,src:n.data.images.original.url}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log("error",e.t0);case 15:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("span",{className:"weather-gif"},this.state.hasData?r.a.createElement("img",{alt:"sunny",src:this.state.src,onClick:this.handleClick}):r.a.createElement(s.a,{icon:o.j}))}}]),a}(n.Component),C=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){return Object(p.a)(this,a),t.call(this)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"weather-summmary"},r.a.createElement(N,{query:this.props.data.weather[0].main}),r.a.createElement("div",{className:"summary-right"},r.a.createElement("h1",null,j(this.props.data.main.temp)," ",this.props.data.weather[0].description),r.a.createElement("div",{className:"summary-details"},r.a.createElement(x,{header:"Feels Like",value:j(this.props.data.main.feels_like)}),r.a.createElement(x,{header:"Low",value:j(this.props.data.main.temp_min)}),r.a.createElement(x,{header:"High",value:j(this.props.data.main.temp_max)}))))}}]),a}(n.Component),S=a(50),W=a(51),q=a(49),D=a(52),T=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this)).state={zoom:7},n}return Object(d.a)(a,[{key:"render",value:function(){var e=[this.props.lat,this.props.lon];return r.a.createElement(S.a,{center:e,zoom:this.state.zoom,style:{height:400},scrollWheelZoom:!1},r.a.createElement(W.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r.a.createElement(q.a,{position:e},r.a.createElement(D.a,null,"You are here")))}}]),a}(n.Component),L=function(e){return r.a.createElement("div",{className:"weather-range"},r.a.createElement("div",{className:"details",style:{width:e.width+"%"}},r.a.createElement("span",{className:"min",style:{paddingLeft:e.padding+"%"}},j(e.min)),r.a.createElement("span",{className:"bar"}),r.a.createElement("span",{className:"max"},j(e.max))))},F=function(e){var t,a;return r.a.createElement("div",{className:"brief"},r.a.createElement("img",{alt:e.weather.description,src:(a=e.weather.icon,"http://openweathermap.org/img/wn/".concat(a,".png"))}),r.a.createElement("span",null,0!==e.index?(t=e.timestamp,w()(1e3*t).format("ddd")):"Today"))},M=function(e){return r.a.createElement("span",{className:"daily-high-low"},e.min,r.a.createElement(s.a,{icon:o.a}),e.max)},G=function(e){return r.a.createElement("div",{className:"sunrise-sunset"},r.a.createElement("span",{className:"sunrise"},r.a.createElement(s.a,{icon:o.k})," ",e.sunrise),r.a.createElement("span",{className:"sunset"},r.a.createElement(s.a,{icon:o.g})," ",e.sunset))},_=function(e){return r.a.createElement("div",{className:"rainfall"},r.a.createElement("span",{className:"label"},"Rain:"),r.a.createElement("span",null,e.rain))},K=function(e){return r.a.createElement("div",{className:"daily-details ".concat(e.expanded?"expanded":"")},r.a.createElement("h4",{className:"description"},e.today.weather[0].description),r.a.createElement("div",{className:"daily-details-header"},r.a.createElement(M,{min:j(e.today.temp.min),max:j(e.today.temp.max)}),r.a.createElement(G,{sunrise:O(e.today.sunrise),sunset:O(e.today.sunset)}),r.a.createElement(_,{rain:"undefined"!==typeof e.today.rain?e.today.rain+" in.":"0 in."})))},z=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).calculateWidth=function(e,t){return 100*(j(e.max,!1)/j(t.max,!1)).toFixed(2)-2},n.calculateLeftPadding=function(e,t){return 100*((j(e.min,!1)-j(t.min,!1))/(j(t.max,!1)-j(t.min,!1))).toFixed(2)},n.handleClick=function(){n.setState((function(e){return{expanded:!e.expanded}}))},n.state={expanded:!1},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this.calculateWidth(this.props.today.temp,this.props.range),t=this.calculateLeftPadding(this.props.today.temp,this.props.range);return r.a.createElement("div",{className:"daily-forecast",onClick:this.handleClick},r.a.createElement("div",{className:"inner"},r.a.createElement(F,{index:this.props.index,weather:this.props.today.weather[0],timestamp:this.props.today.dt}),r.a.createElement(L,{min:this.props.today.temp.min,max:this.props.today.temp.max,width:e,padding:t}),this.state.expanded?r.a.createElement(s.a,{icon:o.f}):r.a.createElement(s.a,{icon:o.h})),r.a.createElement(K,{today:this.props.today,expanded:this.state.expanded}))}}]),a}(n.Component),H=function(e){var t=function(e){for(var t=1e3,a=0,n=0;n<e.length;n++)t>e[n].temp.min&&(t=e[n].temp.min),a<e[n].temp.max&&(a=e[n].temp.max);return{min:t,max:a}}(e.forecast.daily),a=e.forecast.daily.map((function(e,a){return r.a.createElement(z,{key:a,index:a,today:e,range:t})}));return r.a.createElement("div",{id:"weather-forecast"},a)},J=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={hasData:!1,perferredUnit:"Fahrenheit"},n.handleSubmit=n.handleSubmit.bind(Object(f.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getTheWeather();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(e){e.preventDefault();var t=e.target[1].value;t.length&&this.getTheWeather(t)}},{key:"getCurrentWeather",value:function(){var e=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&appid=").concat(this.props.apiKey),{mode:"cors"});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getForecast",value:function(){var e=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(t.lat,"&lon=").concat(t.lon,"&exclude=current&appid=").concat(this.props.apiKey),{mode:"cors"});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTheWeather",value:function(){var e=Object(h.a)(m.a.mark((function e(){var t,a,n,r=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:this.props.query,e.next=3,this.getCurrentWeather(t);case 3:return a=e.sent,e.next=6,this.getForecast(a.coord);case 6:n=e.sent,this.setState({weather:a,forecast:n,hasData:!0});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return console.log(this.state.forecast),r.a.createElement("div",{id:"weather"},r.a.createElement("div",{id:"search-location"},r.a.createElement(g,{handleSubmit:this.handleSubmit,query:this.props.query})),this.state.hasData?r.a.createElement("div",null,r.a.createElement(k,{data:this.state.weather}),r.a.createElement(C,{data:this.state.weather}),r.a.createElement(T,{lat:this.state.weather.coord.lat,lon:this.state.weather.coord.lon}),r.a.createElement(H,{forecast:this.state.forecast})):null)}}]),a}(n.Component);a(46);var R=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(l,null),r.a.createElement(J,{apiKey:"f49ab69788385465860411f295879340",query:"Moscow"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.a681237a.chunk.js.map